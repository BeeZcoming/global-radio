<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…¨çƒå¹¿æ’­ç”µå°åœ¨çº¿æ”¶å¬</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        /* æ ·å¼ä¿æŒä¸å˜ï¼Œä¸ä¹‹å‰ç›¸åŒ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 120px;
        }

        .container {
            display: flex;
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(229, 46, 113, 0.5);
        }

        .tagline {
            font-size: 1.1rem;
            color: #aaa;
            margin-bottom: 10px;
        }

        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        .search-box input:focus {
            border-color: #e52e71;
            box-shadow: 0 0 10px rgba(229, 46, 113, 0.5);
        }

        .search-box i {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
        }

        .filter-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        select {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            color: white;
            font-size: 0.9rem;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 120px;
        }

        select:focus {
            border-color: #ff8a00;
            box-shadow: 0 0 10px rgba(255, 138, 0, 0.5);
        }

        option {
            background: #302b63;
        }

        .custom-select {
            position: relative;
            flex: 1;
            min-width: 120px;
        }

        .select-selected {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .select-selected:after {
            content: "â–¼";
            font-size: 0.7rem;
            transition: all 0.3s;
        }

        .select-selected.select-arrow-active:after {
            transform: rotate(180deg);
        }

        .select-selected:hover {
            border-color: #ff8a00;
        }

        .select-items {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 99;
            max-height: 500px;
            overflow-y: auto;
            display: none;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .select-items.active {
            display: block;
        }

        .select-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
            padding-bottom: 8px;
        }

        .select-header .select-item {
            background: rgba(255, 138, 0, 0.15) !important;
            border: 1px solid rgba(255, 138, 0, 0.3) !important;
            font-weight: 600;
            margin-bottom: 5px;
            padding: 10px 12px;
        }

        .select-hot-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-bottom: 15px;
        }

        .select-hot-grid .select-item {
            background: rgba(229, 46, 113, 0.1);
            border: 1px solid rgba(229, 46, 113, 0.2);
            text-align: center;
            padding: 8px 4px;
            font-size: 0.8rem;
            border-radius: 6px;
        }

        .select-hot-grid .select-item:hover {
            background: rgba(229, 46, 113, 0.2);
            transform: translateY(-1px);
        }

        .select-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .select-category {
            margin-bottom: 0;
        }

        .category-title {
            font-size: 0.85rem;
            color: #ff8a00;
            margin-bottom: 8px;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .select-item {
            padding: 6px 8px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s;
            font-size: 0.8rem;
            color: #ddd;
            margin-bottom: 4px;
        }

        .select-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(3px);
        }

        .select-item.active {
            background: rgba(255, 138, 0, 0.2);
            color: #ff8a00;
            font-weight: 500;
        }

        .hot-genre::after {
            content: " ğŸ”¥";
            font-size: 0.7rem;
        }

        .sidebar {
            flex: 0 0 350px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 10px 20px 0px 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            max-height: calc(100vh - 200px);
            overflow: hidden;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .map-container {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 10px 20px 20px 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #ff8a00;
        }

        .radio-list {
            flex: 1;
            overflow-y: auto;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            margin-bottom: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: all 0.3s;
            cursor: pointer;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
            min-height: 60px;
        }

        .radio-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border-color: rgba(255, 138, 0, 0.3);
        }

        .radio-item.active {
            background: rgba(229, 46, 113, 0.2);
            border-color: rgba(229, 46, 113, 0.5);
        }

        .radio-flag {
            width: 30px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
            font-size: 1.2rem;
            text-align: center;
        }

        .radio-info {
            flex: 1;
            min-width: 0;
        }

        .radio-name {
            font-weight: 600;
            margin-bottom: 3px;
            font-size: 0.9rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .radio-country, .radio-genre {
            font-size: 0.75rem;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .play-btn {
            background: #e52e71;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .play-btn:hover {
            background: #ff8a00;
            transform: scale(1.1);
        }

        #map {
            flex: 1;
            width: 100%;
            height: 100%;
            min-height: 500px;
            border-radius: 10px;
            overflow: hidden;
        }

        .country-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .country-name {
            font-size: 1.2rem;
            color: #ff8a00;
            margin-bottom: 10px;
        }

        .player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            display: flex;
            align-items: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .player-info {
            flex: 1;
            margin-left: 20px;
        }

        .player-station {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .player-country {
            color: #aaa;
            font-size: 0.9rem;
        }

        .player-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .control-btn:hover {
            color: #ff8a00;
        }

        .play-pause {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e52e71;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .play-pause:hover {
            background: #ff8a00;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-slider {
            width: 100px;
        }

        .quality-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 10px;
        }

        .quality-select {
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-size: 0.8rem;
            outline: none;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quality-select:focus {
            border-color: #ff8a00;
        }

        .quality-indicator {
            font-size: 0.7rem;
            color: #aaa;
            margin-left: 5px;
        }

        .now-playing {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 20px;
            padding: 10px 15px;
            background: rgba(255, 138, 0, 0.2);
            border-radius: 30px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 138, 0, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 138, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 138, 0, 0); }
        }

        .now-playing i {
            color: #ff8a00;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #aaa;
        }

        .error {
            text-align: center;
            padding: 20px;
            color: #e52e71;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 0.8rem;
            color: #aaa;
        }

        .favorite-btn {
            background: none;
            border: none;
            color: #aaa;
            font-size: 1rem;
            cursor: pointer;
            margin-right: 8px;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .favorite-btn.active {
            color: #ff8a00;
        }

        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tab {
            padding: 8px 15px;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
            font-size: 0.9rem;
        }

        .tab.active {
            color: #ff8a00;
            border-bottom: 2px solid #ff8a00;
        }

        .tab:hover {
            color: #ff8a00;
        }

        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        .history-item {
            display: flex;
            align-items: center;
            padding: 8px;
            margin-bottom: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.3s;
            cursor: pointer;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .history-time {
            font-size: 0.65rem;
            color: #aaa;
            margin-top: 2px;
        }

        .share-btn {
            background: none;
            border: none;
            color: #aaa;
            font-size: 1.2rem;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s;
            position: relative;
        }

        .share-btn:hover {
            color: #2196F3;
        }

        .share-menu {
            position: absolute;
            bottom: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            padding: 10px;
            display: none;
            flex-direction: column;
            gap: 8px;
            min-width: 150px;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .share-menu.active {
            display: flex;
        }

        .share-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            text-decoration: none;
        }

        .share-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .share-option i {
            width: 20px;
            text-align: center;
        }

        .load-more {
            text-align: center;
            padding: 15px 10px 25px 10px;
            margin-top: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .load-more-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .load-more-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ff8a00;
            transform: translateY(-2px);
        }

        .region-selector {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }

        .region-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            padding: 6px 8px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.75rem;
            flex: 1;
            text-align: center;
        }

        .region-btn.active {
            background: rgba(255, 138, 0, 0.2);
            color: #ff8a00;
            border-color: rgba(255, 138, 0, 0.5);
        }

        .region-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .data-source-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 5px;
            padding: 8px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .data-source {
            font-size: 0.7rem;
            color: #aaa;
            text-align: right;
            flex: 1;
        }

        .pulsing-marker {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .welcome-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 138, 0, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideDown 0.5s ease-out;
            max-width: 500px;
            width: 90%;
        }

        @keyframes slideDown {
            from { top: -100px; opacity: 0; }
            to { top: 20px; opacity: 1; }
        }

        .welcome-notification .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: auto;
        }

        .welcome-content {
            flex: 1;
        }

        .welcome-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .welcome-details {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .share-success {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(33, 150, 243, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: fadeInOut 3s ease-in-out;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        }

        .wechat-share-guide {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1003;
        }

        .wechat-share-guide > div {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            z-index: 1002;
            max-width: 300px;
            animation: slideInRight 0.5s ease-out;
        }

        .notification.info {
            background: rgba(33, 150, 243, 0.9);
        }

        .notification.success {
            background: rgba(76, 175, 80, 0.9);
        }

        .notification.warning {
            background: rgba(255, 152, 0, 0.9);
        }

        .notification.error {
            background: rgba(244, 67, 54, 0.9);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .skeleton-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            animation: skeleton-pulse 1.5s ease-in-out infinite;
        }

        .skeleton-flag {
            width: 30px;
            height: 20px;
            border-radius: 3px;
            margin-right: 10px;
            background: rgba(255, 255, 255, 0.1);
        }

        .skeleton-info {
            flex: 1;
        }

        .skeleton-name {
            height: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 6px;
            width: 70%;
        }

        .skeleton-details {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            width: 50%;
        }

        .skeleton-map {
            height: 500px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            animation: skeleton-pulse 1.5s ease-in-out infinite;
        }

        @keyframes skeleton-pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .buffering {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: #000;
            color: white;
            padding: 8px;
            z-index: 10000;
            text-decoration: none;
        }

        .skip-link:focus {
            top: 6px;
        }

        @media (max-width: 1200px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                flex: 1;
                max-height: 500px;
            }
            
            .map-container {
                min-height: 600px;
            }
            
            .select-columns {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .search-container {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .player {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .player-controls {
                width: 100%;
                justify-content: center;
            }
            
            .sidebar {
                flex: 0 0 auto;
            }
            
            body {
                padding-bottom: 160px;
            }

            .region-selector {
                flex-wrap: wrap;
            }

            .region-btn {
                flex: 0 0 calc(33.333% - 5px);
                min-height: 44px;
            }

            .select-columns {
                grid-template-columns: 1fr;
            }
            
            .select-hot-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .welcome-notification {
                top: 10px;
                left: 10px;
                right: 10px;
                transform: none;
                max-width: none;
            }

            .radio-item {
                min-height: 60px;
                padding: 12px 15px;
            }
            
            .play-btn {
                width: 44px;
                height: 44px;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">è·³è¿‡å¯¼èˆª</a>

    <header>
        <h1><i class="fas fa-globe-americas"></i> å…¨çƒå¹¿æ’­ç”µå°</h1>
        <p class="tagline">æ¢ç´¢ä¸–ç•Œå„åœ°çš„å¹¿æ’­ç”µå°ï¼Œéšæ—¶æ”¶å¬å…¨çƒå£°éŸ³</p>
    </header>

    <div class="container">
        <div class="sidebar">
            <h2 class="section-title">ç”µå°åˆ—è¡¨</h2>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="æœç´¢ç”µå°åç§°ã€å›½å®¶æˆ–ç”µå°åˆ†ç±»...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            
            <div class="region-selector">
                <button class="region-btn active" data-region="all">å…¨éƒ¨</button>
                <button class="region-btn" data-region="asia">äºšæ´²</button>
                <button class="region-btn" data-region="europe">æ¬§æ´²</button>
                <button class="region-btn" data-region="north-america">åŒ—ç¾æ´²</button>
                <button class="region-btn" data-region="south-america">å—ç¾æ´²</button>
                <button class="region-btn" data-region="africa">éæ´²</button>
                <button class="region-btn" data-region="oceania">å¤§æ´‹æ´²</button>
            </div>
            
            <div class="filter-container">
                <select id="country-filter">
                    <option value="">æ‰€æœ‰å›½å®¶</option>
                </select>
                <select id="language-filter">
                    <option value="">æ‰€æœ‰è¯­è¨€</option>
                </select>
                
                <div class="custom-select" id="genre-select">
                    <div class="select-selected" style="font-weight: bold; color: #ff8a00;">æ‰€æœ‰åˆ†ç±»</div>
                    <div class="select-items">
                        <div class="select-header">
                            <div class="select-item active" data-value="all" style="background: rgba(255, 138, 0, 0.2); font-weight: bold;">
                                <i class="fas fa-globe"></i> æ‰€æœ‰åˆ†ç±»
                            </div>
                        </div>
                        <div class="select-category">
                            <div class="category-title"><i class="fas fa-fire"></i> çƒ­é—¨åˆ†ç±»</div>
                            <div class="select-hot-grid">
                                <div class="select-item hot-genre" data-value="æµè¡ŒéŸ³ä¹">æµè¡ŒéŸ³ä¹</div>
                                <div class="select-item hot-genre" data-value="æ–°é—»èµ„è®¯">æ–°é—»èµ„è®¯</div>
                                <div class="select-item hot-genre" data-value="æ‘‡æ»šéŸ³ä¹">æ‘‡æ»šéŸ³ä¹</div>
                                <div class="select-item hot-genre" data-value="è°ˆè¯èŠ‚ç›®">è°ˆè¯èŠ‚ç›®</div>
                                <div class="select-item hot-genre" data-value="å¤å…¸éŸ³ä¹">å¤å…¸éŸ³ä¹</div>
                                <div class="select-item hot-genre" data-value="ä½“è‚²èŠ‚ç›®">ä½“è‚²èŠ‚ç›®</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats">
                <span id="total-stations">åŠ è½½ä¸­...</span>
                <span id="filtered-stations"></span>
            </div>
            
            <div class="tabs">
                <div class="tab active" data-tab="all">å…¨éƒ¨ç”µå°</div>
                <div class="tab" data-tab="favorites">æ”¶è—</div>
                <div class="tab" data-tab="history">æ’­æ”¾å†å²</div>
            </div>
            
            <div class="tab-content active" id="all-stations">
                <div class="radio-list" id="radio-list">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i> æ­£åœ¨åŠ è½½ç”µå°åˆ—è¡¨...
                    </div>
                </div>
                <div class="load-more">
                    <button class="load-more-btn" id="load-more-btn" style="display: none;">åŠ è½½æ›´å¤šç”µå°</button>
                </div>
				<div class="data-source-container">
					<div></div>
					<div class="data-source" id="data-source">æ•°æ®æ¥æº: zyds.net | åœ°åŒº: æ‰€æœ‰åœ°åŒº</div>
				</div>				
            </div>
            
            <div class="tab-content" id="favorites-stations">
                <div class="radio-list" id="favorites-list">
                    <div class="loading">æš‚æ— æ”¶è—çš„ç”µå°</div>
                </div>
            </div>
            
            <div class="tab-content" id="history-stations">
                <div class="radio-list" id="history-list">
                    <div class="loading">æš‚æ— æ’­æ”¾å†å²</div>
                </div>
            </div>
        </div>
        
        <div class="main-content" id="main-content">
            <div class="map-container">
                <h2 class="section-title">ä¸–ç•Œç”µå°åœ°å›¾</h2>
                <div id="map"></div>
                <div class="country-info">
                    <div class="country-name" id="selected-country">å…¨çƒç”µå°</div>
                    <p id="country-station-count">ç‚¹å‡»åœ°å›¾ä¸Šçš„æ ‡è®°æˆ–ä½¿ç”¨ç­›é€‰å™¨é€‰æ‹©ç”µå°</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="player">
        <div class="now-playing">
            <i class="fas fa-music"></i>
            <span>æ­£åœ¨æ’­æ”¾</span>
        </div>
        
        <div class="player-info">
            <div class="player-station" id="current-station">è¯·é€‰æ‹©ä¸€ä¸ªç”µå°å¼€å§‹æ’­æ”¾</div>
            <div class="player-country" id="current-country"></div>
        </div>
        
        <div class="player-controls">
            <button class="control-btn play-pause" id="play-pause-btn"><i class="fas fa-play"></i></button>
            <button class="control-btn stop-btn" id="stop-btn"><i class="fas fa-stop"></i></button>
            
            <div class="volume-container">
                <button class="control-btn volume-btn"><i class="fas fa-volume-up"></i></button>
                <input type="range" class="volume-slider" min="0" max="100" value="80">
            </div>

            <div class="quality-container">
                <span style="font-size: 0.8rem; color: #aaa;">éŸ³è´¨:</span>
                <select class="quality-select" id="quality-select">
                    <option value="auto">è‡ªåŠ¨</option>
                    <option value="high">é«˜éŸ³è´¨</option>
                    <option value="medium">ä¸­éŸ³è´¨</option>
                    <option value="low">ä½éŸ³è´¨</option>
                </select>
                <span class="quality-indicator" id="quality-indicator"></span>
            </div>

            <div class="share-container">
                <button class="control-btn share-btn" id="share-btn">
                    <i class="fas fa-share-alt"></i>
                </button>
                <div class="share-menu" id="share-menu">
                    <a href="#" class="share-option" data-platform="copy-link">
                        <i class="fas fa-link"></i>
                        <span>å¤åˆ¶åˆ†äº«é“¾æ¥</span>
                    </a>
                    <a href="#" class="share-option" data-platform="wechat">
                        <i class="fab fa-weixin"></i>
                        <span>å¾®ä¿¡</span>
                    </a>
                    <a href="#" class="share-option" data-platform="weibo">
                        <i class="fab fa-weibo"></i>
                        <span>å¾®åš</span>
                    </a>
                    <a href="#" class="share-option" data-platform="qq">
                        <i class="fab fa-qq"></i>
                        <span>QQ</span>
                    </a>
                    <a href="#" class="share-option" data-platform="twitter">
                        <i class="fab fa-twitter"></i>
                        <span>Twitter</span>
                    </a>
                    <a href="#" class="share-option" data-platform="facebook">
                        <i class="fab fa-facebook"></i>
                        <span>Facebook</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // ç®€åŒ–çš„ä¸»åº”ç”¨ç±» - ä¿®å¤åˆå§‹åŒ–é—®é¢˜
        class GlobalRadioApp {
            constructor() {
                this.stations = [];
                this.filteredStations = [];
                this.favorites = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
                this.history = JSON.parse(localStorage.getItem('radioHistory') || '[]');
                this.currentStation = null;
                this.isPlaying = false;
                this.audioPlayer = new Audio();
                this.map = null;
                this.markers = [];
                
                this.currentRegion = 'all';
                this.currentQuality = 'auto';
                this.currentGenre = 'all';
                this.activeTab = 'all';
                
                this.setupAudioEvents();
            }

            setupAudioEvents() {
                this.audioPlayer.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    this.showNotification('æ’­æ”¾å¤±è´¥ï¼Œè¯·å°è¯•å…¶ä»–ç”µå°', 'error');
                });
            }

            async init() {
                try {
                    // åˆå§‹åŒ–åœ°å›¾
                    this.initMap();
                    
                    // åˆå§‹åŒ–UI
                    this.initCustomSelect();
                    this.attachEventListeners();
                    
                    // åŠ è½½æ•°æ®
                    await this.loadData();
                    
                    // æ£€æŸ¥URLå‚æ•°
                    this.checkUrlParams();
                    
                } catch (error) {
                    console.error('åˆå§‹åŒ–å¤±è´¥:', error);
                    this.showNotification('åº”ç”¨åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
                }
            }

            initMap() {
                this.map = L.map('map').setView([20, 0], 3);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(this.map);
            }

            initCustomSelect() {
                const customSelect = document.getElementById('genre-select');
                const selectSelected = customSelect.querySelector('.select-selected');
                const selectItems = customSelect.querySelector('.select-items');
                const selectItemsAll = customSelect.querySelectorAll('.select-item');
                
                selectSelected.addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectItems.classList.toggle('active');
                    selectSelected.classList.toggle('select-arrow-active');
                });
                
                selectItemsAll.forEach(item => {
                    item.addEventListener('click', () => {
                        selectItemsAll.forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                        selectSelected.textContent = item.textContent;
                        this.currentGenre = item.dataset.value;
                        selectItems.classList.remove('active');
                        selectSelected.classList.remove('select-arrow-active');
                        this.performSearch();
                    });
                });
                
                document.addEventListener('click', () => {
                    selectItems.classList.remove('active');
                    selectSelected.classList.remove('select-arrow-active');
                });
            }

            attachEventListeners() {
                // æœç´¢ç›¸å…³
                document.getElementById('search-input').addEventListener('input', 
                    this.debounce(() => this.performSearch(), 300));
                
                document.getElementById('country-filter').addEventListener('change', 
                    () => this.performSearch());
                
                document.getElementById('language-filter').addEventListener('change', 
                    () => this.performSearch());
                
                // æ’­æ”¾æ§åˆ¶
                document.getElementById('play-pause-btn').addEventListener('click', 
                    () => this.togglePlayPause());
                
                document.getElementById('stop-btn').addEventListener('click', 
                    () => this.stopPlayback());
                
                document.querySelector('.volume-slider').addEventListener('input', 
                    (e) => this.audioPlayer.volume = e.target.value / 100);
                
                // éŸ³è´¨é€‰æ‹©
                document.getElementById('quality-select').addEventListener('change', 
                    (e) => {
                        this.currentQuality = e.target.value;
                        this.performSearch();
                    });
                
                // åˆ†äº«åŠŸèƒ½
                document.getElementById('share-btn').addEventListener('click', 
                    () => this.toggleShareMenu());
                
                // æ ‡ç­¾é¡µåˆ‡æ¢
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        tab.classList.add('active');
                        const tabId = tab.dataset.tab;
                        document.getElementById(`${tabId}-stations`).classList.add('active');
                        
                        this.activeTab = tabId;
                        this.updateTabs();
                    });
                });
                
                // åœ°åŒºé€‰æ‹©
                document.querySelectorAll('.region-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.region-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        this.currentRegion = btn.dataset.region;
                        this.performSearch();
                    });
                });

                // åˆ†äº«é€‰é¡¹
                document.querySelectorAll('.share-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        e.preventDefault();
                        const platform = option.dataset.platform;
                        this.shareStation(platform);
                    });
                });
            }

            async loadData() {
                try {
                    // ä½¿ç”¨ç¤ºä¾‹æ•°æ®ï¼Œé¿å…ç½‘ç»œè¯·æ±‚å¤±è´¥
                    this.stations = this.generateSampleStations();
                    this.filteredStations = [...this.stations];
                    
                    this.updateStats();
                    this.renderRadioList();
                    this.updateMapMarkers(this.stations.slice(0, 50));
                    
                    this.showNotification('æ•°æ®åŠ è½½æˆåŠŸ', 'success');
                    
                } catch (error) {
                    console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                    // å³ä½¿å¤±è´¥ä¹Ÿä½¿ç”¨ç¤ºä¾‹æ•°æ®
                    this.stations = this.generateSampleStations();
                    this.filteredStations = [...this.stations];
                    this.renderRadioList();
                    this.showNotification('ä½¿ç”¨ç¤ºä¾‹æ•°æ®', 'warning');
                }
            }

            generateSampleStations() {
                const countries = ['ä¸­å›½', 'ç¾å›½', 'è‹±å›½', 'æ—¥æœ¬', 'å¾·å›½', 'æ³•å›½', 'æ¾³å¤§åˆ©äºš', 'åŠ æ‹¿å¤§', 'å·´è¥¿', 'ä¿„ç½—æ–¯'];
                const languages = ['ä¸­æ–‡', 'è‹±è¯­', 'æ—¥è¯­', 'å¾·è¯­', 'æ³•è¯­', 'è¥¿ç­ç‰™è¯­'];
                const genres = ['æµè¡ŒéŸ³ä¹', 'æ–°é—»èµ„è®¯', 'è°ˆè¯èŠ‚ç›®', 'ä½“è‚²èŠ‚ç›®', 'å¤å…¸éŸ³ä¹', 'æ‘‡æ»šéŸ³ä¹'];
                
                const stations = [];
                for (let i = 1; i <= 50; i++) {
                    const country = countries[Math.floor(Math.random() * countries.length)];
                    const language = languages[Math.floor(Math.random() * languages.length)];
                    const genre = genres[Math.floor(Math.random() * genres.length)];
                    
                    stations.push({
                        stationuuid: `station-${i}`,
                        name: `${country}${genre}ç”µå°${i}`,
                        country: country,
                        countrycode: this.getCountryCode(country),
                        url_resolved: `https://example.com/stream${i}.mp3`,
                        tags: `${genre},${i % 3 === 0 ? 'high' : i % 3 === 1 ? 'medium' : 'low'}`,
                        language: language,
                        votes: Math.floor(Math.random() * 1000),
                        geo_lat: 20 + Math.random() * 50,
                        geo_long: -120 + Math.random() * 240,
                        bitrate: i % 3 === 0 ? 320 : (i % 3 === 1 ? 128 : 64)
                    });
                }
                return stations;
            }

            getCountryCode(country) {
                const codes = {
                    'ä¸­å›½': 'CN', 'ç¾å›½': 'US', 'è‹±å›½': 'GB', 'æ—¥æœ¬': 'JP', 
                    'å¾·å›½': 'DE', 'æ³•å›½': 'FR', 'æ¾³å¤§åˆ©äºš': 'AU', 'åŠ æ‹¿å¤§': 'CA',
                    'å·´è¥¿': 'BR', 'ä¿„ç½—æ–¯': 'RU'
                };
                return codes[country] || 'UN';
            }

            performSearch() {
                const searchTerm = document.getElementById('search-input').value.toLowerCase();
                const countryFilter = document.getElementById('country-filter').value;
                
                this.filteredStations = this.stations.filter(station => {
                    const matchesSearch = searchTerm === '' || 
                        (station.name && station.name.toLowerCase().includes(searchTerm)) || 
                        (station.country && station.country.toLowerCase().includes(searchTerm)) ||
                        (station.tags && station.tags.toLowerCase().includes(searchTerm));
                    
                    const matchesCountry = countryFilter === '' || 
                        station.country === countryFilter;
                    
                    return matchesSearch && matchesCountry;
                });
                
                this.renderRadioList();
                this.updateMapMarkers(this.filteredStations.slice(0, 50));
                this.updateStats();
            }

            renderRadioList() {
                const container = document.getElementById('radio-list');
                const stationsToRender = this.filteredStations;
                
                if (stationsToRender.length === 0) {
                    container.innerHTML = '<div class="loading">æœªæ‰¾åˆ°åŒ¹é…çš„ç”µå°</div>';
                    return;
                }
                
                container.innerHTML = '';
                
                stationsToRender.forEach(station => {
                    const radioItem = this.createRadioItem(station);
                    container.appendChild(radioItem);
                });
            }

            createRadioItem(station) {
                const flagEmoji = this.getFlagEmoji(station.countrycode);
                const isFavorite = this.favorites.some(fav => fav.stationuuid === station.stationuuid);
                const isActive = this.currentStation?.stationuuid === station.stationuuid;
                
                const radioItem = document.createElement('div');
                radioItem.className = `radio-item ${isActive ? 'active' : ''}`;
                radioItem.dataset.id = station.stationuuid;
                radioItem.setAttribute('role', 'button');
                radioItem.setAttribute('tabindex', '0');
                radioItem.setAttribute('aria-label', `æ’­æ”¾ ${station.name}`);
                
                radioItem.innerHTML = `
                    <button class="favorite-btn ${isFavorite ? 'active' : ''}" 
                            data-id="${station.stationuuid}"
                            aria-pressed="${isFavorite}">
                        <i class="fas fa-heart"></i>
                    </button>
                    <div class="radio-flag">${flagEmoji}</div>
                    <div class="radio-info">
                        <div class="radio-name">${station.name || 'æœªçŸ¥ç”µå°'}</div>
                        <div class="radio-country">${station.country || 'æœªçŸ¥å›½å®¶'}</div>
                        <div class="radio-genre">${this.formatGenres(station.tags)}</div>
                    </div>
                    <button class="play-btn" data-id="${station.stationuuid}">
                        <i class="fas fa-play"></i>
                    </button>
                `;
                
                // æ·»åŠ äº‹ä»¶ç›‘å¬
                radioItem.querySelector('.play-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.playStation(station.stationuuid);
                });
                
                radioItem.querySelector('.favorite-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.toggleFavorite(station.stationuuid);
                    e.target.classList.toggle('active');
                });
                
                radioItem.addEventListener('click', () => {
                    this.playStation(station.stationuuid);
                });
                
                return radioItem;
            }

            playStation(stationId) {
                const station = this.stations.find(s => s.stationuuid === stationId);
                if (!station) return;
                
                this.currentStation = station;
                document.getElementById('current-station').textContent = station.name || 'æœªçŸ¥ç”µå°';
                document.getElementById('current-country').textContent = `${station.country || 'æœªçŸ¥å›½å®¶'} â€¢ ${this.formatGenres(station.tags)}`;
                
                const playPauseBtn = document.getElementById('play-pause-btn');
                playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                this.isPlaying = true;
                
                this.addToHistory(station);
                this.updateRadioListHighlights(stationId);
                
                // éŸ³é¢‘æ’­æ”¾
                this.audioPlayer.pause();
                this.audioPlayer.src = 'https://example.com/placeholder.mp3'; // ç¤ºä¾‹URL
                
                this.showNotification(`å¼€å§‹æ’­æ”¾ ${station.name}`, 'success');
            }

            togglePlayPause() {
                if (!this.currentStation) {
                    if (this.filteredStations.length > 0) {
                        this.playStation(this.filteredStations[0].stationuuid);
                    }
                    return;
                }
                
                if (this.isPlaying) {
                    this.audioPlayer.pause();
                    document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-play"></i>';
                } else {
                    this.audioPlayer.play().catch(error => {
                        console.error('æ’­æ”¾å¤±è´¥:', error);
                        document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-play"></i>';
                    });
                    document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-pause"></i>';
                }
                
                this.isPlaying = !this.isPlaying;
            }

            stopPlayback() {
                this.audioPlayer.pause();
                this.audioPlayer.currentTime = 0;
                this.isPlaying = false;
                document.getElementById('play-pause-btn').innerHTML = '<i class="fas fa-play"></i>';
            }

            toggleFavorite(stationId) {
                const station = this.stations.find(s => s.stationuuid === stationId);
                if (!station) return;
                
                const index = this.favorites.findIndex(fav => fav.stationuuid === stationId);
                
                if (index === -1) {
                    this.favorites.push(station);
                    this.showNotification('å·²æ·»åŠ åˆ°æ”¶è—', 'success');
                } else {
                    this.favorites.splice(index, 1);
                    this.showNotification('å·²ä»æ”¶è—ç§»é™¤', 'info');
                }
                
                localStorage.setItem('radioFavorites', JSON.stringify(this.favorites));
                
                if (this.activeTab === 'favorites') {
                    this.updateTabs();
                }
            }

            addToHistory(station) {
                const existingIndex = this.history.findIndex(item => 
                    item.station.stationuuid === station.stationuuid
                );
                
                if (existingIndex !== -1) {
                    this.history.splice(existingIndex, 1);
                }
                
                this.history.push({
                    station: station,
                    timestamp: Date.now()
                });
                
                if (this.history.length > 50) {
                    this.history = this.history.slice(-50);
                }
                
                localStorage.setItem('radioHistory', JSON.stringify(this.history));
                
                if (this.activeTab === 'history') {
                    this.updateTabs();
                }
            }

            updateTabs() {
                if (this.activeTab === 'favorites') {
                    this.renderFavoritesList();
                } else if (this.activeTab === 'history') {
                    this.renderHistoryList();
                }
            }

            renderFavoritesList() {
                const container = document.getElementById('favorites-list');
                
                if (this.favorites.length === 0) {
                    container.innerHTML = '<div class="loading">æš‚æ— æ”¶è—çš„ç”µå°</div>';
                    return;
                }
                
                container.innerHTML = '';
                this.favorites.forEach(station => {
                    const radioItem = this.createRadioItem(station);
                    container.appendChild(radioItem);
                });
            }

            renderHistoryList() {
                const container = document.getElementById('history-list');
                
                if (this.history.length === 0) {
                    container.innerHTML = '<div class="loading">æš‚æ— æ’­æ”¾å†å²</div>';
                    return;
                }
                
                container.innerHTML = '';
                const recentHistory = this.history.slice(-20).reverse();
                
                recentHistory.forEach(item => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    historyItem.dataset.id = item.station.stationuuid;
                    
                    const flagEmoji = this.getFlagEmoji(item.station.countrycode);
                    const timeString = new Date(item.timestamp).toLocaleString();
                    
                    historyItem.innerHTML = `
                        <div class="radio-flag">${flagEmoji}</div>
                        <div class="radio-info">
                            <div class="radio-name">${item.station.name || 'æœªçŸ¥ç”µå°'}</div>
                            <div class="radio-country">${item.station.country || 'æœªçŸ¥å›½å®¶'}</div>
                            <div class="history-time">${timeString}</div>
                        </div>
                        <button class="play-btn" data-id="${item.station.stationuuid}">
                            <i class="fas fa-play"></i>
                        </button>
                    `;
                    
                    historyItem.querySelector('.play-btn').addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.playStation(item.station.stationuuid);
                    });
                    
                    historyItem.addEventListener('click', () => {
                        this.playStation(item.station.stationuuid);
                    });
                    
                    container.appendChild(historyItem);
                });
            }

            updateStats() {
                const totalDisplay = `${this.stations.length} ç”µå°`;
                document.getElementById('total-stations').textContent = totalDisplay;
                
                const displayedCountText = `æ˜¾ç¤º: ${this.filteredStations.length}`;
                document.getElementById('filtered-stations').textContent = displayedCountText;
            }

            updateRadioListHighlights(stationId) {
                document.querySelectorAll('.radio-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.dataset.id === stationId) {
                        item.classList.add('active');
                    }
                });
            }

            updateMapMarkers(stations) {
                // æ¸…é™¤ç°æœ‰æ ‡è®°
                this.markers.forEach(marker => this.map.removeLayer(marker));
                this.markers = [];
                
                stations.forEach(station => {
                    if (station.geo_lat && station.geo_long) {
                        const marker = L.marker([station.geo_lat, station.geo_long])
                            .addTo(this.map)
                            .bindPopup(`
                                <div style="color: black; min-width: 200px;">
                                    <b>${station.name || 'æœªçŸ¥ç”µå°'}</b><br>
                                    ${station.country || ''}<br>
                                    <small>${this.formatGenres(station.tags)}</small><br>
                                    <button onclick="app.playStation('${station.stationuuid}')" 
                                            style="background:#e52e71;color:white;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;margin-top:5px;">
                                        æ’­æ”¾
                                    </button>
                                </div>
                            `);
                        
                        this.markers.push(marker);
                    }
                });
            }

            getFlagEmoji(countryCode) {
                if (!countryCode) return 'ğŸŒ';
                const codePoints = countryCode.toUpperCase().split('').map(char => 127397 + char.charCodeAt());
                return String.fromCodePoint(...codePoints);
            }

            formatGenres(tags) {
                if (!tags) return 'æœªåˆ†ç±»';
                const genreList = tags.split(',').slice(0, 2);
                return genreList.join(' Â· ');
            }

            toggleShareMenu() {
                const shareMenu = document.getElementById('share-menu');
                shareMenu.classList.toggle('active');
            }

            shareStation(platform) {
                if (!this.currentStation) {
                    this.showNotification('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç”µå°', 'warning');
                    return;
                }
                
                const station = this.currentStation;
                const shareUrl = `${window.location.origin}${window.location.pathname}?station=${station.stationuuid}`;
                
                if (platform === 'copy-link') {
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        this.showNotification('åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
                    }).catch(() => {
                        this.showNotification('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥', 'error');
                    });
                } else {
                    this.showNotification('åˆ†äº«åŠŸèƒ½å¼€å‘ä¸­', 'info');
                }
                
                document.getElementById('share-menu').classList.remove('active');
            }

            checkUrlParams() {
                const urlParams = new URLSearchParams(window.location.search);
                const stationId = urlParams.get('station');
                
                if (stationId) {
                    setTimeout(() => {
                        const station = this.stations.find(s => s.stationuuid === stationId);
                        if (station) {
                            this.showWelcomeNotification(station);
                            this.playStation(stationId);
                        }
                    }, 1000);
                }
            }

            showWelcomeNotification(station) {
                const notification = document.createElement('div');
                notification.className = 'welcome-notification';
                notification.innerHTML = `
                    <i class="fas fa-broadcast-tower"></i>
                    <div class="welcome-content">
                        <div class="welcome-title">æ¬¢è¿æ”¶å¬æœ‹å‹åˆ†äº«çš„ç”µå°</div>
                        <div class="welcome-details">
                            ${station.name} Â· ${station.country}
                        </div>
                    </div>
                    <button class="close-btn"><i class="fas fa-times"></i></button>
                `;
                
                document.body.appendChild(notification);
                
                notification.querySelector('.close-btn').addEventListener('click', () => {
                    notification.remove();
                });
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 8000);
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 3000);
            }

            debounce(func, wait) {
                let timeout;
                return (...args) => {
                    clearTimeout(timeout);
                    timeout = setTimeout(() => func.apply(this, args), wait);
                };
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        const app = new GlobalRadioApp();
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });

        // å¯¼å‡ºåˆ°å…¨å±€
        window.app = app;
        window.shareStation = (platform) => app.shareStation(platform);
    </script>
</body>
</html>
